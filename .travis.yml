language: r
cache: packages
warnings_are_errors: true

r_packages:
  - covr

after_success:
  - Rscript -e 'library(covr); codecov()'
  
sudo: required

apt_packages:
  - r-cran-rjava
  - openjdk-7-jre

before_install:
  - export JAVA_HOME=/usr/lib/jvm/java-7-openjdk-amd64/jre
  - export PATH=$PATH:$JAVA_HOME/bin
  - export LD_LIBRARY_PATH=/usr/lib/jvm/java-8-oracle/lib/amd64:/usr/lib/jvm/java-8-oracle/jre/lib/amd64/server
  - sudo R CMD javareconf
